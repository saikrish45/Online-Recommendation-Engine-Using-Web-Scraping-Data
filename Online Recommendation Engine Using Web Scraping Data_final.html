<!DOCTYPE html>
<!-- saved from url=(0029)http://127.0.0.1:4739/app.Rmd -->
<html class=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  
  <script type="application/shiny-singletons"></script>
  <script type="application/html-dependencies">json2[2014.02.04];jquery[1.12.4];shiny[1.1.0]</script>
<script src="./Online Recommendation Engine Using Web Scraping Data_final_files/json2-min.js.download"></script>
<script src="./Online Recommendation Engine Using Web Scraping Data_final_files/jquery.min.js.download"></script>
<link href="./Online Recommendation Engine Using Web Scraping Data_final_files/shiny.css" rel="stylesheet">
<script src="./Online Recommendation Engine Using Web Scraping Data_final_files/shiny.min.js.download"></script>  <script src="./Online Recommendation Engine Using Web Scraping Data_final_files/rmd_loader.js.download"></script>
  <link href="./Online Recommendation Engine Using Web Scraping Data_final_files/rmd_loader.css" rel="stylesheet">

<meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" type="text/css" href="./Online Recommendation Engine Using Web Scraping Data_final_files/bootstrap.min.css"><script src="./Online Recommendation Engine Using Web Scraping Data_final_files/bootstrap.min.js.download"></script><script src="./Online Recommendation Engine Using Web Scraping Data_final_files/html5shiv.min.js.download"></script><script src="./Online Recommendation Engine Using Web Scraping Data_final_files/respond.min.js.download"></script><script src="./Online Recommendation Engine Using Web Scraping Data_final_files/tabsets.js.download"></script><link rel="stylesheet" type="text/css" href="./Online Recommendation Engine Using Web Scraping Data_final_files/default.css"><script src="./Online Recommendation Engine Using Web Scraping Data_final_files/highlight.js.download"></script><link rel="stylesheet" type="text/css" href="./Online Recommendation Engine Using Web Scraping Data_final_files/rmd_perf.css"><script src="./Online Recommendation Engine Using Web Scraping Data_final_files/rmd_perf.js.download"></script><meta name="rstudio_origin" content="127.0.0.1:21921"><script src="./Online Recommendation Engine Using Web Scraping Data_final_files/rsiframe.js.download"></script>



<meta name="generator" content="pandoc">


<meta name="author" content="Sai Krishna Boggarapu">


<title>Online Recommendation Engine Using Web Scraping Data</title>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


<script type="text/javascript" src="./Online Recommendation Engine Using Web Scraping Data_final_files/MathJax.js.download"></script><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head>

<body><div id="MathJax_Message" style="display: none;"></div>
  <div>
    <div data-display-if="!output.__reactivedoc__" data-ns-prefix="" style="display: none;">
      <div id="rmd_loader_wrapper">
        <div id="rmd_loader" style="">
          <img src="./Online Recommendation Engine Using Web Scraping Data_final_files/rmd_loader.gif">
          <p>Loading</p>
        </div>
      </div>
    </div>
    <div id="__reactivedoc__" class="shiny-html-output shiny-bound-output">







<style type="text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>



<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("section-TOC");
});
</script>

<!-- code folding -->






<div class="fluid-row" id="section-header">



<h1 class="title toc-ignore">Online Recommendation Engine Using Web Scraping Data</h1>
<h4 class="author"><em>Sai Krishna Boggarapu</em></h4>
<h4 class="date"><em>Nov 20, 2017</em></h4>

</div>


<pre class="r"><code class="hljs"><span class="hljs-comment">#Loading the required libraries</span>
<span class="hljs-keyword">library</span>(rvest)
<span class="hljs-keyword">library</span>(ggplot2)
<span class="hljs-keyword">library</span>(rsconnect)
<span class="hljs-keyword">library</span>(shiny)

<span class="hljs-comment">#Specifying the URL for the website to be scraped and I have used IMDB Top 100 feature films in 2016</span>
url &lt;- <span class="hljs-string">'http://www.imdb.com/search/title?count=100&amp;release_date=2016,2016&amp;title_type=feature'</span>

<span class="hljs-comment">#Reading the HTML code from the website</span>
webpage &lt;- read_html(url)

<span class="hljs-comment">#Using CSS selectors to scrap the rankings section</span>
rank_data_html &lt;- html_nodes(webpage,<span class="hljs-string">'.text-primary'</span>)

<span class="hljs-comment">#Converting the ranking data to text</span>
rank_data &lt;- html_text(rank_data_html)

<span class="hljs-comment">#Let's have a look at the rankings</span>
head(rank_data)</code></pre>
<pre><code class="hljs">## [1] "1." "2." "3." "4." "5." "6."</code></pre>
<pre class="r"><code class="hljs"><span class="hljs-comment">#Checking the data type of rank_data</span>
class(rank_data)</code></pre>
<pre><code class="hljs">## [1] "character"</code></pre>
<pre class="r"><code class="hljs"><span class="hljs-comment">#Data-Preprocessing: Converting rankings to numerical</span>
rank_data&lt;-as.numeric(rank_data)

<span class="hljs-comment">#Let's have another look at the rankings</span>
head(rank_data)</code></pre>
<pre><code class="hljs">## [1] 1 2 3 4 5 6</code></pre>
<pre class="r"><code class="hljs"><span class="hljs-comment">#Using CSS selectors to scrap the title section</span>
title_data_html &lt;- html_nodes(webpage,<span class="hljs-string">'.lister-item-header a'</span>)

<span class="hljs-comment">#Converting the title data to text</span>
title_data &lt;- html_text(title_data_html)

<span class="hljs-comment">#Let's have a look at the title</span>
head(title_data)</code></pre>
<pre><code class="hljs">## [1] "Deadpool"                   "Suicide Squad"             
## [3] "Doctor Strange"             "Ghostbusters"              
## [5] "Captain America: Civil War" "Moana"</code></pre>
<pre class="r"><code class="hljs"><span class="hljs-comment">#Using CSS selectors to scrap the description section</span>
description_data_html &lt;- html_nodes(webpage,<span class="hljs-string">'.ratings-bar+ .text-muted'</span>)

<span class="hljs-comment">#Converting the description data to text</span>
description_data &lt;- html_text(description_data_html)

<span class="hljs-comment">#Let's have a look at the description data</span>
head(description_data)</code></pre>
<pre><code class="hljs">## [1] "\n    A fast-talking mercenary with a morbid sense of humor is subjected to a rogue experiment that leaves him with accelerated healing powers and a quest for revenge."                                            
## [2] "\n    A secret government agency recruits some of the most dangerous incarcerated super-villains to form a defensive task force. Their first mission: save the world from the apocalypse."                          
## [3] "\n    While on a journey of physical and spiritual healing, a brilliant neurosurgeon is drawn into the world of the mystic arts."                                                                                   
## [4] "\n    Following a ghost invasion of Manhattan, paranormal enthusiasts Erin Gilbert and Abby Yates, nuclear engineer Jillian Holtzmann, and subway worker Patty Tolan band together to stop the otherworldly threat."
## [5] "\n    Political involvement in the Avengers' activities causes a rift between Captain America and Iron Man."                                                                                                        
## [6] "\n    In Ancient Polynesia, when a terrible curse incurred by the Demigod Maui reaches Moana's island, she answers the Ocean's call to seek out the Demigod to set things right."</code></pre>
<pre class="r"><code class="hljs"><span class="hljs-comment">#Data-Preprocessing: removing '\n'</span>
description_data&lt;-gsub(<span class="hljs-string">"\n"</span>,<span class="hljs-string">""</span>,description_data)

<span class="hljs-comment">#Let's have another look at the description data </span>
head(description_data)</code></pre>
<pre><code class="hljs">## [1] "    A fast-talking mercenary with a morbid sense of humor is subjected to a rogue experiment that leaves him with accelerated healing powers and a quest for revenge."                                            
## [2] "    A secret government agency recruits some of the most dangerous incarcerated super-villains to form a defensive task force. Their first mission: save the world from the apocalypse."                          
## [3] "    While on a journey of physical and spiritual healing, a brilliant neurosurgeon is drawn into the world of the mystic arts."                                                                                   
## [4] "    Following a ghost invasion of Manhattan, paranormal enthusiasts Erin Gilbert and Abby Yates, nuclear engineer Jillian Holtzmann, and subway worker Patty Tolan band together to stop the otherworldly threat."
## [5] "    Political involvement in the Avengers' activities causes a rift between Captain America and Iron Man."                                                                                                        
## [6] "    In Ancient Polynesia, when a terrible curse incurred by the Demigod Maui reaches Moana's island, she answers the Ocean's call to seek out the Demigod to set things right."</code></pre>
<pre class="r"><code class="hljs"><span class="hljs-comment">#Using CSS selectors to scrap the Movie runtime section</span>
runtime_data_html &lt;- html_nodes(webpage,<span class="hljs-string">'.text-muted .runtime'</span>)

<span class="hljs-comment">#Converting the runtime data to text</span>
runtime_data &lt;- html_text(runtime_data_html)

<span class="hljs-comment">#Let's have a look at the runtime</span>
head(runtime_data)</code></pre>
<pre><code class="hljs">## [1] "108 min" "123 min" "115 min" "116 min" "147 min" "107 min"</code></pre>
<pre class="r"><code class="hljs"><span class="hljs-comment">#Data-Preprocessing: removing mins and converting it to numerical</span>

runtime_data&lt;-gsub(<span class="hljs-string">" min"</span>,<span class="hljs-string">""</span>,runtime_data)
runtime_data&lt;-as.numeric(runtime_data)

<span class="hljs-comment">#Using CSS selectors to scrap the Movie genre section</span>
genre_data_html &lt;- html_nodes(webpage,<span class="hljs-string">'.genre'</span>)

<span class="hljs-comment">#Converting the genre data to text</span>
genre_data &lt;- html_text(genre_data_html)

<span class="hljs-comment">#Let's have a look at the runtime</span>
head(genre_data)</code></pre>
<pre><code class="hljs">## [1] "\nAction, Adventure, Comedy            "   
## [2] "\nAction, Adventure, Fantasy            "  
## [3] "\nAction, Adventure, Fantasy            "  
## [4] "\nAction, Comedy, Fantasy            "     
## [5] "\nAction, Adventure, Sci-Fi            "   
## [6] "\nAnimation, Adventure, Comedy            "</code></pre>
<pre class="r"><code class="hljs"><span class="hljs-comment">#Data-Preprocessing: removing \n</span>
genre_data&lt;-gsub(<span class="hljs-string">"\n"</span>,<span class="hljs-string">""</span>,genre_data)

<span class="hljs-comment">#Data-Preprocessing: removing excess spaces</span>
genre_data&lt;-gsub(<span class="hljs-string">" "</span>,<span class="hljs-string">""</span>,genre_data)

<span class="hljs-comment">#taking only the first genre of each movie</span>
genre_data&lt;-gsub(<span class="hljs-string">",.*"</span>,<span class="hljs-string">""</span>,genre_data)

<span class="hljs-comment">#Convering each genre from text to factor</span>
genre_data&lt;-as.factor(genre_data)

<span class="hljs-comment">#Let's have another look at the genre data</span>
head(genre_data)</code></pre>
<pre><code class="hljs">## [1] Action    Action    Action    Action    Action    Animation
## 8 Levels: Action Adventure Animation Biography Comedy Crime ... Horror</code></pre>
<pre class="r"><code class="hljs"><span class="hljs-comment">#Using CSS selectors to scrap the IMDB rating section</span>
rating_data_html &lt;- html_nodes(webpage,<span class="hljs-string">'.ratings-imdb-rating strong'</span>)

<span class="hljs-comment">#Converting the ratings data to text</span>
rating_data &lt;- html_text(rating_data_html)

<span class="hljs-comment">#Let's have a look at the ratings</span>
head(rating_data)</code></pre>
<pre><code class="hljs">## [1] "8.0" "6.1" "7.5" "5.3" "7.8" "7.6"</code></pre>
<pre class="r"><code class="hljs"><span class="hljs-comment">#Data-Preprocessing: converting ratings to numerical</span>
rating_data&lt;-as.numeric(rating_data)

<span class="hljs-comment">#Let's have another look at the ratings data</span>
head(rating_data)</code></pre>
<pre><code class="hljs">## [1] 8.0 6.1 7.5 5.3 7.8 7.6</code></pre>
<pre class="r"><code class="hljs"><span class="hljs-comment">#Using CSS selectors to scrap the votes section</span>
votes_data_html &lt;- html_nodes(webpage,<span class="hljs-string">'.sort-num_votes-visible span:nth-child(2)'</span>)

<span class="hljs-comment">#Converting the votes data to text</span>
votes_data &lt;- html_text(votes_data_html)

<span class="hljs-comment">#Let's have a look at the votes data</span>
head(votes_data)</code></pre>
<pre><code class="hljs">## [1] "740,284" "481,012" "427,989" "170,275" "506,427" "192,649"</code></pre>
<pre class="r"><code class="hljs"><span class="hljs-comment">#Data-Preprocessing: removing commas</span>
votes_data&lt;-gsub(<span class="hljs-string">","</span>,<span class="hljs-string">""</span>,votes_data)

<span class="hljs-comment">#Data-Preprocessing: converting votes to numerical</span>
votes_data&lt;-as.numeric(votes_data)

<span class="hljs-comment">#Let's have another look at the votes data</span>
head(votes_data)</code></pre>
<pre><code class="hljs">## [1] 740284 481012 427989 170275 506427 192649</code></pre>
<pre class="r"><code class="hljs"><span class="hljs-comment">#Using CSS selectors to scrap the directors section</span>
directors_data_html &lt;- html_nodes(webpage,<span class="hljs-string">'.text-muted+ p a:nth-child(1)'</span>)

<span class="hljs-comment">#Converting the directors data to text</span>
directors_data &lt;- html_text(directors_data_html)

<span class="hljs-comment">#Let's have a look at the directors data</span>
head(directors_data)</code></pre>
<pre><code class="hljs">## [1] "Tim Miller"       "David Ayer"       "Scott Derrickson"
## [4] "Paul Feig"        "Anthony Russo"    "Ron Clements"</code></pre>
<pre class="r"><code class="hljs"><span class="hljs-comment">#Data-Preprocessing: converting directors data into factors</span>
directors_data&lt;-as.factor(directors_data)

<span class="hljs-comment">#Using CSS selectors to scrap the actors section</span>
actors_data_html &lt;- html_nodes(webpage,<span class="hljs-string">'.lister-item-content .ghost+ a'</span>)

<span class="hljs-comment">#Converting the gross actors data to text</span>
actors_data &lt;- html_text(actors_data_html)

<span class="hljs-comment">#Let's have a look at the actors data</span>
head(actors_data)</code></pre>
<pre><code class="hljs">## [1] "Ryan Reynolds"        "Will Smith"           "Benedict Cumberbatch"
## [4] "Melissa McCarthy"     "Chris Evans"          "Auli'i Cravalho"</code></pre>
<pre class="r"><code class="hljs"><span class="hljs-comment">#Data-Preprocessing: converting actors data into factors</span>
actors_data&lt;-as.factor(actors_data)

<span class="hljs-comment">#Using CSS selectors to scrap the metascore section</span>
metascore_data_html &lt;- html_nodes(webpage,<span class="hljs-string">'.metascore'</span>)

<span class="hljs-comment">#Converting the runtime data to text</span>
metascore_data &lt;- html_text(metascore_data_html)

<span class="hljs-comment">#Let's have a look at the metascore </span>
head(metascore_data)</code></pre>
<pre><code class="hljs">## [1] "65        " "40        " "72        " "60        " "75        "
## [6] "81        "</code></pre>
<pre class="r"><code class="hljs"><span class="hljs-comment">#Data-Preprocessing: removing extra space in metascore</span>
metascore_data&lt;-gsub(<span class="hljs-string">" "</span>,<span class="hljs-string">""</span>,metascore_data)

<span class="hljs-comment">#Lets check the length of metascore data</span>
length(metascore_data)</code></pre>
<pre><code class="hljs">## [1] 97</code></pre>
<pre class="r"><code class="hljs"><span class="hljs-comment">#After visual inspection Metascore is missing for 3 movies with rankings 31,68,93</span>
<span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> c(<span class="hljs-number">31</span>,<span class="hljs-number">68</span>,<span class="hljs-number">93</span>)){
  
  a&lt;-metascore_data[<span class="hljs-number">1</span>:(i-<span class="hljs-number">1</span>)]
  
  b&lt;-metascore_data[i:length(metascore_data)]
  
  metascore_data&lt;-append(a,list(<span class="hljs-string">"NA"</span>))
  
  metascore_data&lt;-append(metascore_data,b)
  
}

<span class="hljs-comment">#Let's have another look at length of the metascore data</span>
length(metascore_data)</code></pre>
<pre><code class="hljs">## [1] 100</code></pre>
<pre class="r"><code class="hljs"><span class="hljs-comment">#Data-Preprocessing: converting metascore to numerical</span>
metascore_data&lt;-as.numeric(metascore_data)</code></pre>
<pre><code class="hljs">## Warning: NAs introduced by coercion

## Warning: NAs introduced by coercion

## Warning: NAs introduced by coercion</code></pre>
<pre class="r"><code class="hljs"><span class="hljs-comment">#Let's look at summary statistics</span>
summary(metascore_data)</code></pre>
<pre><code class="hljs">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
##    21.0    44.0    58.0    58.3    71.0    99.0       3</code></pre>
<pre class="r"><code class="hljs"><span class="hljs-comment">#Using CSS selectors to scrap the gross revenue section</span>
gross_data_html &lt;- html_nodes(webpage,<span class="hljs-string">'.ghost~ .text-muted+ span'</span>)

<span class="hljs-comment">#Converting the gross revenue data to text</span>
gross_data &lt;- html_text(gross_data_html)

<span class="hljs-comment">#Let's have a look at the votes data</span>
head(gross_data)</code></pre>
<pre><code class="hljs">## [1] "$363.07M" "$325.10M" "$232.64M" "$128.34M" "$408.08M" "$248.76M"</code></pre>
<pre class="r"><code class="hljs"><span class="hljs-comment">#Data-Preprocessing: removing '$' and 'M' signs</span>
gross_data&lt;-gsub(<span class="hljs-string">"M"</span>,<span class="hljs-string">""</span>,gross_data)

gross_data&lt;-substring(gross_data,<span class="hljs-number">2</span>,<span class="hljs-number">6</span>)

<span class="hljs-comment">#Let's check the length of gross data</span>
length(gross_data)</code></pre>
<pre><code class="hljs">## [1] 91</code></pre>
<pre class="r"><code class="hljs"><span class="hljs-comment">#Filling missing entries of gross data with NA for below movie rankings</span>
<span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> c(<span class="hljs-number">18</span>,<span class="hljs-number">21</span>,<span class="hljs-number">31</span>,<span class="hljs-number">68</span>,<span class="hljs-number">72</span>,<span class="hljs-number">81</span>,<span class="hljs-number">88</span>,<span class="hljs-number">89</span>,<span class="hljs-number">93</span>)){
  
  a&lt;-gross_data[<span class="hljs-number">1</span>:(i-<span class="hljs-number">1</span>)]
  
  b&lt;-gross_data[i:length(gross_data)]
  
  gross_data&lt;-append(a,list(<span class="hljs-string">"NA"</span>))
  
  gross_data&lt;-append(gross_data,b)
  
}

<span class="hljs-comment">#Data-Preprocessing: converting gross to numerical</span>
gross_data&lt;-as.numeric(gross_data)</code></pre>
<pre><code class="hljs">## Warning: NAs introduced by coercion

## Warning: NAs introduced by coercion

## Warning: NAs introduced by coercion

## Warning: NAs introduced by coercion

## Warning: NAs introduced by coercion

## Warning: NAs introduced by coercion

## Warning: NAs introduced by coercion

## Warning: NAs introduced by coercion

## Warning: NAs introduced by coercion</code></pre>
<pre class="r"><code class="hljs"><span class="hljs-comment">#Let's have another look at the length of gross data</span>
length(gross_data)</code></pre>
<pre><code class="hljs">## [1] 100</code></pre>
<pre class="r"><code class="hljs"><span class="hljs-comment">#Combining all the lists to form a data frame</span>
movies_df&lt;-data.frame(Rank = rank_data[<span class="hljs-number">1</span>:<span class="hljs-number">100</span>], Title = title_data[<span class="hljs-number">1</span>:<span class="hljs-number">100</span>],
                      
                      Description = description_data[<span class="hljs-number">1</span>:<span class="hljs-number">100</span>], Runtime = runtime_data[<span class="hljs-number">1</span>:<span class="hljs-number">100</span>],
                      
                      Genre = genre_data[<span class="hljs-number">1</span>:<span class="hljs-number">100</span>], Rating = rating_data[<span class="hljs-number">1</span>:<span class="hljs-number">100</span>],
                      
                      Metascore = metascore_data[<span class="hljs-number">1</span>:<span class="hljs-number">100</span>], Votes = votes_data[<span class="hljs-number">1</span>:<span class="hljs-number">100</span>],
                      
                      Gross_Earning_in_Mil = gross_data, Director = directors_data[<span class="hljs-number">1</span>:<span class="hljs-number">100</span>], Actor = actors_data[<span class="hljs-number">1</span>:<span class="hljs-number">100</span>])

<span class="hljs-comment">#Structure of the data frame</span>
str(movies_df)</code></pre>
<pre><code class="hljs">## 'data.frame':    100 obs. of  11 variables:
##  $ Rank                : num  1 2 3 4 5 6 7 8 9 10 ...
##  $ Title               : Factor w/ 100 levels "10 Cloverfield Lane",..: 20 70 23 28 15 54 76 75 67 11 ...
##  $ Description         : Factor w/ 100 levels "    A blind woman's relationship with her husband changes when she regains her sight and discovers disturbing d"| __truncated__,..: 9 23 98 54 72 65 39 64 63 53 ...
##  $ Runtime             : num  108 123 115 116 147 107 97 118 108 151 ...
##  $ Genre               : Factor w/ 8 levels "Action","Adventure",..: 1 1 1 1 1 3 8 7 3 1 ...
##  $ Rating              : num  8 6.1 7.5 5.3 7.8 7.6 6 5.3 7.1 6.6 ...
##  $ Metascore           : num  65 40 72 60 75 81 42 62 59 44 ...
##  $ Votes               : num  740284 481012 427989 170275 506427 ...
##  $ Gross_Earning_in_Mil: num  363 325 233 128 408 ...
##  $ Director            : Factor w/ 98 levels "Alessandro Carloni",..: 91 21 83 73 8 81 96 4 34 98 ...
##  $ Actor               : Factor w/ 89 levels "Alexander Skarsgård",..: 72 87 7 61 17 5 51 78 59 6 ...</code></pre>
<pre class="r"><code class="hljs"><span class="hljs-comment">#Data which got from web-scraping</span>
head(movies_df)</code></pre>
<pre><code class="hljs">##   Rank                      Title
## 1    1                   Deadpool
## 2    2              Suicide Squad
## 3    3             Doctor Strange
## 4    4               Ghostbusters
## 5    5 Captain America: Civil War
## 6    6                      Moana
##                                                                                                                                                                                                         Description
## 1                                                 A fast-talking mercenary with a morbid sense of humor is subjected to a rogue experiment that leaves him with accelerated healing powers and a quest for revenge.
## 2                               A secret government agency recruits some of the most dangerous incarcerated super-villains to form a defensive task force. Their first mission: save the world from the apocalypse.
## 3                                                                                        While on a journey of physical and spiritual healing, a brilliant neurosurgeon is drawn into the world of the mystic arts.
## 4     Following a ghost invasion of Manhattan, paranormal enthusiasts Erin Gilbert and Abby Yates, nuclear engineer Jillian Holtzmann, and subway worker Patty Tolan band together to stop the otherworldly threat.
## 5                                                                                                             Political involvement in the Avengers' activities causes a rift between Captain America and Iron Man.
## 6                                        In Ancient Polynesia, when a terrible curse incurred by the Demigod Maui reaches Moana's island, she answers the Ocean's call to seek out the Demigod to set things right.
##   Runtime     Genre Rating Metascore  Votes Gross_Earning_in_Mil
## 1     108    Action    8.0        65 740284                363.0
## 2     123    Action    6.1        40 481012                325.1
## 3     115    Action    7.5        72 427989                232.6
## 4     116    Action    5.3        60 170275                128.3
## 5     147    Action    7.8        75 506427                408.0
## 6     107 Animation    7.6        81 192649                248.7
##           Director                Actor
## 1       Tim Miller        Ryan Reynolds
## 2       David Ayer           Will Smith
## 3 Scott Derrickson Benedict Cumberbatch
## 4        Paul Feig     Melissa McCarthy
## 5    Anthony Russo          Chris Evans
## 6     Ron Clements      Auli'i Cravalho</code></pre>
<pre class="r"><code class="hljs"><span class="hljs-comment">#Analyzing which movie from which Genre has the highest and Lowest Run time</span>
ggplot(data=movies_df,aes(Runtime))+geom_histogram(aes(fill=Genre),bins=<span class="hljs-number">30</span>)</code></pre>
<p><img src="./Online Recommendation Engine Using Web Scraping Data_final_files/unnamed-chunk-1-1.png" width="672"></p>
<pre class="r"><code class="hljs"><span class="hljs-comment">#Analyzing which Genre has the highest votes with different Run times</span>
ggplot(data=movies_df,aes(Runtime,Rating))+geom_point(aes(size=Votes,color=Genre))</code></pre>
<p><img src="./Online Recommendation Engine Using Web Scraping Data_final_files/unnamed-chunk-1-2.png" width="672"></p>
<pre class="r"><code class="hljs"><span class="hljs-comment">#Analyzing across all Genres which has highest average gross earnings in runtime 100 to 120</span>
ggplot(data=movies_df,aes(Runtime,Gross_Earning_in_Mil))+geom_point(aes(size=Rating,color=Genre))</code></pre>
<pre><code class="hljs">## Warning: Removed 9 rows containing missing values (geom_point).</code></pre>
<p><img src="./Online Recommendation Engine Using Web Scraping Data_final_files/unnamed-chunk-1-3.png" width="672"></p>
<pre class="r"><code class="hljs"><span class="hljs-comment">#ui.R</span>
    ui &lt;- fluidPage(
      titlePanel(<span class="hljs-string">"Online Recommendation Engine Using Web Scraping Data"</span>),
        fluidRow(
          column(<span class="hljs-number">5</span>,
              selectInput(inputId = <span class="hljs-string">"movie1"</span>, label = h3(<span class="hljs-string">"Choose Movies You Like"</span>),
                       choices = as.character(movies_df$Title)),
           
              selectInput(inputId = <span class="hljs-string">"movie2"</span>, label = <span class="hljs-literal">NA</span>,
                       choices = as.character(movies_df$Title)),
           
              selectInput(inputId = <span class="hljs-string">"movie3"</span>, label = <span class="hljs-literal">NA</span>,
                       choices = as.character(movies_df$Title)),
  
              submitButton(<span class="hljs-string">"Submit"</span>)
       ),
    
    column(<span class="hljs-number">7</span>,
           h3(<span class="hljs-string">"You Might Like These Too!"</span>),
           tableOutput(<span class="hljs-string">"table"</span>))
  )
)

<span class="hljs-comment">#server.R</span>
server&lt;- <span class="hljs-keyword">function</span>(input,output){
  
  output$table &lt;- renderTable({ 
    
      <span class="hljs-comment">#Getting the user inputted movie values from ui.R</span>
      movie1 &lt;- input$movie1 
      movie2 &lt;- input$movie2 
      movie3 &lt;- input$movie3
      
      <span class="hljs-comment">#Creating empty vector for recommended movies to the user</span>
      recommendedmovies&lt;-c()
      
      <span class="hljs-comment">#Combining the input movies in to a vector</span>
      mymovies&lt;-c()
      mymovies&lt;-c(mymovies,movie1,movie2,movie3)
      
      <span class="hljs-comment">#Finding recommended movies using Genre of user inputted movies</span>
      <span class="hljs-comment">################Context Based Filtering Approach##################</span>
      
      <span class="hljs-keyword">for</span> (eachmovie <span class="hljs-keyword">in</span> mymovies)
      {
        eachgenre&lt;-movies_df$Genre[movies_df$Title==eachmovie]  
        allmoviesgenre&lt;-movies_df$Title[movies_df$Genre==as.character(eachgenre) &amp; movies_df$Title!=eachmovie]
        recommendedmovies&lt;-c(recommendedmovies,head(as.character(allmoviesgenre),<span class="hljs-number">3</span>))
      }
      
      <span class="hljs-comment">#Converting in to dataframe</span>
      recommendedmovies_df&lt;-as.data.frame(recommendedmovies)
      
      recommendedmovies_df
    })
}  
 
<span class="hljs-comment"># Run the app</span>
shinyApp(ui = ui, server = server)</code></pre>
<iframe width="100%" height="400" class="shiny-frame" src="./Online Recommendation Engine Using Web Scraping Data_final_files/saved_resource.html"></iframe>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "mathjax-local/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>


</div>
  </div>



</body></html>